package com.example.mathbomb;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.Writer;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

import android.content.Context;

public class JSONScoreSerializer {
	private Context mContext;
	private String mFilename;

	public JSONScoreSerializer(Context c, String fname) {
		mContext = c;
		mFilename = fname;
	}
	
	public void saveDetails(Record mRecords)
			throws JSONException, IOException {
		JSONObject jsonobject = new JSONObject();
		jsonobject.put(mFilename, mRecords);
		Writer writer = null;
		try{
			OutputStream outputStream = mContext.openFileOutput(mFilename,Context.MODE_PRIVATE);
			writer = new OutputStreamWriter(outputStream);
			writer.write(jsonobject.toString());
		}
		finally{
			if (writer != null) {
				writer.close();
			}
		}
	}

	public Record loadDetails() throws Exception {
		
		
		//JSONObject jsonObject = new JSONObject();
		Record mRecords = new Record();
		BufferedReader reader = null;
		try{
			InputStream inputStream = mContext.openFileInput(mFilename);
			reader = new BufferedReader(new InputStreamReader(inputStream));	
			StringBuilder json_string = new StringBuilder();
			String line = null;	
			while ((line = reader.readLine()) != null) {
				json_string.append(line);
			}
			JSONObject jsonObject = new JSONObject();
			jsonObject.getJSONObject(mFilename);
		}
		catch(FileNotFoundException e){
			
		}
		finally{
				if (reader != null)
					reader.close();
				}
		return mRecords;
		}
}