package com.example.mathbomb;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.UUID;

import org.json.JSONException;

import android.content.Context;
import android.util.Log;

public class SingleRecord {

	private static final String FILENAME = "score.json";
	private Record mRecord;

	private JSONScoreSerializer mJsonSerializer;

	private static SingleRecord sModelSingleton;
	private Context mAppContext;

	private SingleRecord(Context appContext) {
		mAppContext = appContext;
		mJsonSerializer = new JSONScoreSerializer(mAppContext, FILENAME);
        try {
        	mRecord.getScore();
            //mRecord = mJsonSerializer.loadDetails();
        } catch (Exception e) {
        	mRecord = new Record();
            Log.e("SingleRecord", "Error loading crimes: ", e);
        }
	}

	public static SingleRecord get(Context c) throws Exception {
		if (sModelSingleton == null) {
			sModelSingleton = new SingleRecord(c.getApplicationContext());
		}
		return sModelSingleton;
	}

    public Record getScore(String score) {
        mRecord.getScore().equals(score);
        return mRecord;
//    	
//    	for (Record c : mRecord) {
//            if (c.getScore().equals(score))
//                return c;
//        }
     //   return null;
    }
    
//    public void addScore(Record c) {
//		mRecord.get
//		//add(c);
//	}    

    public Record getRecord() {
        return mRecord;
    }

	public Record getDetails() {
		return highScores();
	}

	public boolean saveDetails() throws JSONException, IOException {
		mJsonSerializer.saveDetails(mRecord);
		return true;
	}

	// Sorting Scores in descending order
	public Record highScores() {

		Record tempModelClass1 = new Record();
//		ArrayList<Record> tempModelClass2 = new ArrayList<Record>();
		try {
			tempModelClass1 = mJsonSerializer.loadDetails();
		} catch (Exception e1) {
			e1.printStackTrace();
		}
		return tempModelClass1;
//		Collections.sort(tempModelClass1);
//
//		for (Record mC : tempModelClass1) {
//			if (tempModelClass2.size() > 9)
//				break;
//			tempModelClass2.add(mC);
//		}
//		return tempModelClass2;
	}
}